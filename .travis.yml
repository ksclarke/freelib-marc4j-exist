language: java

# JDK 7 is end-of-life'd in April 2015
jdk:
  - openjdk7
  - oraclejdk8

# Test everything but the docs branch
branches:
  except:
    - docs

install:
  - wget -O maven.tar.gz "http://mirrors.ibiblio.org/apache/maven/maven-3/3.2.5/binaries/apache-maven-3.2.5-bin.tar.gz"
  - tar xfv maven.tar.gz
  - wget -O exist.tar.gz "https://github.com/eXist-db/exist/archive/eXist-2.2.tar.gz"
  - tar xfv exist.tar.gz
  - cd exist-eXist-2.2
  - ./build.sh
  - cd ..

script:
  - ./apache-maven-3.2.5/bin/mvn -Dexist.home=exist-eXist-2.2 install

notifications:
  email:
    recipients:
      - ksclarke@gmail.com
    on_failure: change
    on_success: change
  irc:
    channels:
      - irc.freenode.org#freelibrary
    on_failure: always
    on_success: always

# We don't use sudo so can take advantage of the new Docker container builds
sudo: false
